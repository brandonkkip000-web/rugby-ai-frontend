import{c as C,j as e,a as l,S as F,r as u,b as I,d as A,o as L,B as h,L as U,A as E,t as f,_ as M,s as B,e as T,f as _}from"./index-C22KB8A5.js";import{u as G,a as H,F as O,b,c as y,d as N,e as v,f as S}from"./form-BL03cxsj.js";import{I as V}from"./icon-gmail-DZ5SNnIz.js";import{I as $}from"./input-BTivgnDN.js";import{P as z}from"./password-input-rN1TtR1E.js";import{C as D,a as K,b as W,c as Y,d as q}from"./card-luRS2wCt.js";import{U as J,B as p}from"./badge-BXut8YEw.js";import{U as Q}from"./user-CGAArmt0.js";import{L as X}from"./loader-circle-DkNtY0OO.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],ee=C("heart",Z);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],ae=C("log-in",se),g={admin:["Full system access","Manage all teams and players","Edit match results","Access advanced analytics","User management","System configuration"],coach:["Team management","Player performance tracking","Match strategy analysis","Team-specific insights","Player statistics access"],player:["Personal statistics","Team information","Performance tracking","Match schedules"],fan:["View team standings","Player statistics","Match results","Basic comparisons"]},te={admin:F,coach:J,player:Q,fan:ee},w={admin:"bg-red-100 text-red-800 border-red-200",coach:"bg-blue-100 text-blue-800 border-blue-200",player:"bg-green-100 text-green-800 border-green-200",fan:"bg-purple-100 text-purple-800 border-purple-200"};function re({selectedRole:r,onRoleSelect:d,className:m}){const i=["admin","coach","player","fan"];return e.jsxs("div",{className:l("space-y-4",m),children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Select Your Role"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose the role that best describes your relationship with Kenya Rugby Analytics"})]}),e.jsx("div",{className:"grid gap-3",children:i.map(s=>{const a=te[s],n=r===s;return e.jsxs(D,{className:l("cursor-pointer transition-all hover:shadow-md",n&&"ring-2 ring-primary"),onClick:()=>d(s),children:[e.jsx(K,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:l("p-2 rounded-full",w[s]),children:e.jsx(a,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx(W,{className:"text-base capitalize",children:s}),e.jsxs(Y,{className:"text-xs",children:[s==="admin"&&"System Administrator",s==="coach"&&"Team Coach",s==="player"&&"Rugby Player",s==="fan"&&"Rugby Enthusiast"]})]})]}),e.jsx(p,{variant:n?"default":"outline",className:l("text-xs",n&&w[s]),children:n?"Selected":"Select"})]})}),e.jsx(q,{className:"pt-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Capabilities:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[g[s].slice(0,3).map((x,c)=>e.jsx(p,{variant:"secondary",className:"text-xs",children:x},c)),g[s].length>3&&e.jsxs(p,{variant:"secondary",className:"text-xs",children:["+",g[s].length-3," more"]})]})]})})]},s)})})]})}const ne=L({email:T({error:r=>r.input===""?"Please enter your email":void 0}),password:B().min(1,"Please enter your password").min(7,"Password must be at least 7 characters long"),role:M(["admin","coach","player","fan"])});function ge({className:r,redirectTo:d,...m}){const[i,s]=u.useState(!1),[a,n]=u.useState(null),[x,c]=u.useState(!1),k=I(),{auth:j}=A(),o=G({resolver:H(ne),defaultValues:{email:"",password:"",role:void 0}});function R(t){if(!a){c(!0);return}s(!0);const P={accountNo:"ACC001",email:t.email,role:[a],exp:Date.now()+1440*60*1e3};f.promise(_(2e3),{loading:"Signing in...",success:()=>(s(!1),j.setUser(P),j.setAccessToken("mock-access-token"),k({to:d||"/",replace:!0}),`Welcome back, ${t.email}! (${a})`),error:"Error"})}return x?e.jsxs("div",{className:l("space-y-6",r),children:[e.jsx(re,{selectedRole:a,onRoleSelect:t=>{n(t),o.setValue("role",t),c(!1)}}),e.jsx(h,{variant:"outline",onClick:()=>c(!1),className:"w-full",children:"Back to Login"})]}):e.jsx(O,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(R),className:l("grid gap-3",r),...m,children:[e.jsx(b,{control:o.control,name:"email",render:({field:t})=>e.jsxs(y,{children:[e.jsx(N,{children:"Email"}),e.jsx(v,{children:e.jsx($,{placeholder:"name@example.com",...t})}),e.jsx(S,{})]})}),e.jsx(b,{control:o.control,name:"password",render:({field:t})=>e.jsxs(y,{className:"relative",children:[e.jsx(N,{children:"Password"}),e.jsx(v,{children:e.jsx(z,{placeholder:"********",...t})}),e.jsx(S,{}),e.jsx(U,{to:"/forgot-password",className:"text-muted-foreground absolute end-0 -top-0.5 text-sm font-medium hover:opacity-75",children:"Forgot password?"})]})}),a&&e.jsx("div",{className:"p-3 bg-muted rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Selected Role:"}),e.jsx("span",{className:"text-sm capitalize bg-primary text-primary-foreground px-2 py-1 rounded",children:a})]})}),e.jsx(h,{className:"mt-2",disabled:i,type:a?"submit":"button",onClick:a?void 0:()=>c(!0),children:i?e.jsx(X,{className:"animate-spin"}):a?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"mr-2"}),"Sign in"]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"mr-2"}),"Select Role & Continue"]})}),e.jsxs("div",{className:"relative my-2",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background text-muted-foreground px-2",children:"Or continue with"})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.jsxs(h,{variant:"outline",type:"button",disabled:i,onClick:()=>{f.info("Google login will be implemented with backend OAuth")},children:[e.jsx(V,{className:"h-4 w-4"})," Google"]})})]})})}export{ge as U};
